<!-- checkout.html -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ShopEase â€” Checkout</title>
    <meta name="description"
        content="Secure and luxury checkout experience â€” shipping, payment, and order confirmation.">

    <!-- Bootstrap & Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Shared CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>

<body>
    <!-- NAVBAR -->
    <header class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container py-2">
            <a class="navbar-brand fw-bold fs-3" href="index.html">ShopEase</a>
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item"><a href="cart.html" class="nav-link"><i class="bi bi-cart me-1"></i>Back to
                        Cart</a></li>
            </ul>
        </div>
    </header>

    <!-- CHECKOUT -->
    <main class="container my-5">
        <h2 class="fw-semibold mb-4">Checkout</h2>
        <div class="row g-4">
            <!-- LEFT: Form -->
            <div class="col-lg-8">
                <form id="checkoutForm" class="vstack gap-4 needs-validation" novalidate>
                    <!-- Address -->
                    <section class="card border-0 shadow-sm rounded-4 p-4">
                        <h5 class="fw-semibold mb-3"><i class="bi bi-geo-alt me-2 text-primary"></i>Shipping Address
                        </h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="fullName" required>
                                <div class="invalid-feedback">Enter your name</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="phone" required>
                                <div class="invalid-feedback">Enter a valid phone</div>
                            </div>
                            <div class="col-md-12">
                                <label class="form-label">Address Line</label>
                                <input type="text" class="form-control" id="addressLine" required>
                                <div class="invalid-feedback">Enter your address</div>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">City</label>
                                <input type="text" class="form-control" id="city" required>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label">Postal Code</label>
                                <input type="text" class="form-control" id="zip" required>
                            </div>
                        </div>
                    </section>

                    <!-- Delivery Options -->
                    <section class="card border-0 shadow-sm rounded-4 p-4">
                        <h5 class="fw-semibold mb-3"><i class="bi bi-truck me-2 text-primary"></i>Delivery Options</h5>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="delivery" id="standardDelivery" checked>
                            <label class="form-check-label" for="standardDelivery">Standard (Free, 4â€“6 days)</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="delivery" id="expressDelivery">
                            <label class="form-check-label" for="expressDelivery">Express (+â‚¹99, 1â€“2 days)</label>
                        </div>
                    </section>

                    <!-- Payment -->
                    <section class="card border-0 shadow-sm rounded-4 p-4">
                        <h5 class="fw-semibold mb-3"><i class="bi bi-credit-card me-2 text-primary"></i>Payment Method
                        </h5>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="payment" id="cod" checked>
                            <label class="form-check-label" for="cod">Cash on Delivery</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="payment" id="card">
                            <label class="form-check-label" for="card">Credit/Debit Card</label>
                        </div>

                        <div id="cardDetails" class="mt-3 d-none">
                            <div class="row g-3">
                                <div class="col-md-8">
                                    <label class="form-label">Card Number</label>
                                    <input type="text" class="form-control" id="cardNumber" maxlength="16"
                                        placeholder="xxxx xxxx xxxx xxxx">
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">CVV</label>
                                    <input type="text" class="form-control" id="cvv" maxlength="3">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Expiry Month</label>
                                    <input type="text" class="form-control" id="expMonth" maxlength="2"
                                        placeholder="MM">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Expiry Year</label>
                                    <input type="text" class="form-control" id="expYear" maxlength="2" placeholder="YY">
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Confirm -->
                    <div class="d-flex justify-content-end">
                        <button type="submit" class="btn btn-primary rounded-pill px-5 py-2 fw-semibold">
                            Place Order
                        </button>
                    </div>
                </form>
            </div>

            <!-- RIGHT: Order Summary -->
            <aside class="col-lg-4">
                <div class="card border-0 shadow-sm rounded-4 p-4 position-sticky" style="top:90px">
                    <h5 class="fw-semibold mb-3">Order Summary</h5>
                    <div id="summaryItems" class="vstack gap-2 small">
                        <!-- JS inserts summary -->
                    </div>
                    <hr>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Subtotal</span><span id="summarySubtotal">â‚¹0</span>
                    </div>
                    <div class="d-flex justify-content-between mb-2">
                        <span>Shipping</span><span id="summaryShipping">â‚¹40</span>
                    </div>
                    <div class="d-flex justify-content-between fw-bold">
                        <span>Total</span><span id="summaryTotal">â‚¹0</span>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Order Confirmation -->
        <div id="orderConfirm" class="d-none text-center py-5">
            <img src="https://images.unsplash.com/photo-1607083206968-13611e3d76d3?auto=format&fit=crop&w=600&q=80"
                width="180" height="180" class="rounded-4 mb-3" alt="Order success">
            <h4 class="fw-semibold">Order Confirmed ðŸŽ‰</h4>
            <p class="text-muted">Thank you for shopping with ShopEase! A confirmation email has been sent.</p>
            <a href="account.html" class="btn btn-primary rounded-pill mt-2">View My Orders</a>
        </div>
    </main>

    <!-- FOOTER -->
    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center small">
            <p class="mb-1">&copy; 2025 ShopEase â€” All rights reserved.</p>
            <p class="mb-0">Images: Unsplash â€” credited in data.js.</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/data.js"></script>
    <script src="js/script.js"></script>

    <!-- Page-specific JS -->
    <script>
        (function () {
            'use strict';
            const cart = JSON.parse(localStorage.getItem('shop_cart') || '[]');
            const products = window.products || [];
            const summaryItems = document.getElementById('summaryItems');
            const subtotalEl = document.getElementById('summarySubtotal');
            const shippingEl = document.getElementById('summaryShipping');
            const totalEl = document.getElementById('summaryTotal');
            const form = document.getElementById('checkoutForm');
            const orderConfirm = document.getElementById('orderConfirm');
            const cardOption = document.getElementById('card');
            const codOption = document.getElementById('cod');
            const cardDetails = document.getElementById('cardDetails');

            function renderSummary() {
                let subtotal = 0;
                summaryItems.innerHTML = '';
                cart.forEach(item => {
                    const p = products.find(pr => pr.id === item.id);
                    if (!p) return;
                    const price = p.price * item.qty;
                    subtotal += price;
                    const div = document.createElement('div');
                    div.className = 'd-flex justify-content-between';
                    div.innerHTML = `<span>${p.title} Ã— ${item.qty}</span><span>â‚¹${price}</span>`;
                    summaryItems.appendChild(div);
                });
                const shipping = subtotal > 500 ? 0 : 40;
                subtotalEl.textContent = 'â‚¹' + subtotal.toLocaleString('en-IN');
                shippingEl.textContent = 'â‚¹' + shipping;
                totalEl.textContent = 'â‚¹' + (subtotal + shipping).toLocaleString('en-IN');
            }
            renderSummary();

            cardOption.addEventListener('change', () => cardDetails.classList.remove('d-none'));
            codOption.addEventListener('change', () => cardDetails.classList.add('d-none'));

            // Form validation
            form.addEventListener('submit', e => {
                e.preventDefault();
                if (!form.checkValidity()) {
                    e.stopPropagation();
                    form.classList.add('was-validated');
                    return;
                }
                // Mock payment delay
                form.querySelector('button[type="submit"]').disabled = true;
                form.querySelector('button[type="submit"]').innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Processing...';
                setTimeout(() => {
                    localStorage.removeItem('shop_cart');
                    document.querySelector('.row').classList.add('d-none');
                    orderConfirm.classList.remove('d-none');
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }, 1800);
            });
        })();
    </script>
    <script src="js/checkout.js"></script>
</body>

</html>